{
"hosts":[
	{	
		"hostId": "host1",
   		"type": "CLUSTER",
   		"subType": "PBS",
   		"hostName": "odin.itaca.upv.es",
   		"port": "22",
   		"credentials":{
   			"userName": "acarrion",
       		"password": "6z3e850"	
    	}
	},
	{
    	"hostId": "host2",
    	"type": "Cloud",
    	"subType": "EC2",
    	"credentials":{
        	"userName": "AKIAIMAHBKOXMBZ4AY2A",
        	"password": "QVyjP7CIgOGhXEc2ga8K5lXHqsNILH6SLknussF8"
        }
    },
    {
    	"hostId": "host3",
    	"type": "Cloud",
    	"subType": "OpenNebula",
    	"hostName": "dellblade.i3m.upv.es",
        "port": "2633",
    	"credentials":{
        	"userName": "micafer",
        	"password": "grycap01"
        }
    }               	
	
],
"environments": [
	{
        "environmentId": "env2",
        "osName": "unix",
        "arch": "x86_64",
		"osFlavour": "ubuntu",
        "osVersion":"12.04"      
    }	
],
"stages" : [
{
	"id" : "0-splitter",	
	"hostId": "#host1",
	"environmentId" : "#env2",
	
	"execution": [
    {
		"path" : "split",
		"arguments" : "-l 1 #input0 fragment"
	}
    ],
	
    "retries" : {
    	"onWallTimeExceeded": "2", 
    	"onSoftwareFailure": "2", 
    	"onHardwareFailure": "2"
    },
    
    "stageIn": [
    {
    	"id": "input0",
       	"type": "File",
        "uri": "seqs.fasta"
    }
    ],
    
    "stageOut": [
    {
     	"id": "output0",
     	"type": "File",
     	"file": "fragment*",
     	"replica": "TODO"
    }
    ]
},
{
	"id" : "1-process",
	"hostId": "#host2",
	"environmentId" : "#env2",
	
	"nodes": [
    	{
            "numNodes":"4",
            "coresPerNode":"1",
            "memorySize":"1024m",
            "disks": [
        		{
 	        		"nDisk": "0", 
                	"diskSize":"2048m"
           	    }
            ]
		}
	],
	
	"execution": [
    {
		"path" : "head",
		"arguments" : "-n 1 #output0(1) > header.txt"
	}
    ],
    
    "retries" : {
    	"onWallTimeExceeded": "2", 
    	"onSoftwareFailure": "2", 
    	"onHardwareFailure": "2"
    },

    "stageIn": [
    {
    	"id": "#output0"
    }
    ],
    
    "stageOut": [
    {
     	"id": "output1",
     	"type": "File",
     	"file": "header*"
    }
    ]
},
{
	"id" : "2-merge",
	
	"hostId": "#host3",
	"environmentId" : "#env2",
	"nodes": [
    {
        	"numNodes":"1",
            "coresPerNode":"1",
            "memorySize":"1024m",
            "disks": [
        		{
 	        		"nDisk": "0", 
                	"diskSize":"1024m"
           	    }
            ]
	}
	],
	
	"execution": [
    {
		"path" : "cat",
		"arguments" : "#output1 > result.txt"
	}
    ], 
	
    "retries" : {
    	"onWallTimeExceeded": "2", 
    	"onSoftwareFailure": "2", 
    	"onHardwareFailure": "2" 
    },

    "stageIn":[
    {
    	"id": "#output1"
    }
    ],
    
    "stageOut":[
    {
     	"id": "output2",
     	"type": "File",
     	"file": "result.txt",
     	"replica": "TODO"
    }
    ]
}
]
}