{
"hosts":[
	{	
		"hostid": "host1",
   		"type": "LRMS",
   		"subtype": "PBS",
   		"hostname": "odin.itaca.upv.es",
   		"port": "TODO",
   		"credentials":{
   			"username": "acarrion",
       		"password": "collado"	
    	}
	},
	{
    	"hostid": "host2",
    	"type": "Cloud",
    	"subtype": "EC2",
    	"credentials":{
        	"username": "AKIAIMAHBKOXMBZ4AY2A",
        	"password": "QVyjP7CIgOGhXEc2ga8K5lXHqsNILH6SLknussF8"
        }
    },
    {
    	"hostid": "host3",
    	"type": "Cloud",
    	"subtype": "OpenNebula",
    	"hostname": "dellblade.i3m.upv.es",
        "port": "2633",
    	"credentials":{
        	"username": "micafer",
        	"password": "grycap01"
        }
    }               	
	
],
"environments": [
	{
        "environmentid": "env2",
        "osname": "unix",
        "arch": "x86_64",
		"osflavour": "ubuntu",
        "osversion":"12.04"      
    }	
],
"stages" : [
{
	"id" : "0-splitter",	
	"hostid": "#host1",
	
	"execution": [
    {
		"path" : "split",
		"arguments" : "#input0 fragment"
	}
    ],
	
    "retries" : {
    	"onwalltimeexceeded": "2", 
    	"onsoftwarefailure": "2", 
    	"onhardwarefailure": "2"
    },
    
    "stagein": [
    {
    	"id": "input0",
       	"type": "File",
        "uri": "seqs.fasta"
    }
    ],
    
    "stageout": [
    {
     	"id": "output0",
     	"type": "File",
     	"filterin": "fragment*",
     	"replica": "TODO"
    }
    ]
},
{
	"id" : "1-process",
	"hostid": "#host2",
	"environmentid" : "#env2",
	
	"nodes": [
    	{
            "numnodes":"4",
            "corespernode":"1",
            "memorysize":"1024m",
            "disks": [
        		{
 	        		"ndisk": "0", 
                	"disksize":"2048m"
           	    }
            ]
		}
	],
	
	"execution": [
    {
		"path" : "head",
		"arguments" : "-n 1 #output0(1) > header.txt"
	}
    ],
    
    "retries" : {
    	"onwalltimeexceeded": "2", 
    	"onsoftwarefailure": "2", 
    	"onhardwarefailure": "2"
    },

    "stagein": [
    {
    	"id": "#output0"
    }
    ],
    
    "stageout": [
    {
     	"id": "output1",
     	"type": "File",
     	"filterin": "header*"
    }
    ]
},
{
	"id" : "2-merge",
	
	"hostid": "#host3",
	"environmentid" : "#env2",
	"nodes": [
    {
        	"numnodes":"1",
            "corespernode":"1",
            "memorysize":"1024m",
            "disks": [
        		{
 	        		"ndisk": "0", 
                	"disksize":"1024m"
           	    }
            ]
	}
	],
	
	"execution": [
    {
		"path" : "cat",
		"arguments" : "#output1 > result.txt"
	}
    ], 
	
    "retries" : {
    	"onwalltimeexceeded": "2", 
    	"onsoftwarefailure": "2", 
    	"onhardwarefailure": "2" 
    },

    "stagein":[
    {
    	"id": "#output1"
    }
    ],
    
    "stageout":[
    {
     	"id": "output2",
     	"type": "File",
     	"file": "result.txt",
     	"replica": "TODO"
    }
    ]
},
{
	"id" : "3-test",
	
	"hostid": "#host3",
	"environmentid" : "#env2",
	"nodes": [
    {
        	"numnodes":"4",
            "corespernode":"1",
            "memorysize":"1024m",
            "disks": [
        		{
 	        		"ndisk": "0", 
                	"disksize":"1024m"
           	    }
            ]
	}
	],
	
	"execution": [
    {
		"path" : "cat",
		"arguments" : "#output1(1) > result.txt"
	}
    ], 
	
    "retries" : {
    	"onwalltimeexceeded": "2", 
    	"onsoftwarefailure": "2", 
    	"onhardwarefailure": "2" 
    },

    "stagein":[
    {
    	"id": "#output2"
    }
    ],
    
    "stageout":[
    {
     	"id": "output3",
     	"type": "File",
     	"file": "result.txt",
     	"replica": "TODO"
    }
    ]
}
]
}